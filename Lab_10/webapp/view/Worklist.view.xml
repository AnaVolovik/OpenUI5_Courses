<mvc:View
  controllerName="Lab_10.Lab_10.controller.Worklist"
  xmlns="sap.m"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns:dnd="sap.ui.core.dnd">

  <Page>
    <customHeader>
      <Toolbar>
        <Title text="{= ${i18n>countItems} + ' (' + ${worklistView>/sCount} + ')'}" />
        <IconTabHeader selectedKey="{= ${worklistView>/sIconTHKey}}" select="onIconTabHeaderSelect">
          <items>
            <IconTabFilter key="All" text="{i18n>tabHeaderAll}"/>
            <IconTabFilter key="FilteredAnd" text="{i18n>tabHeaderFilterAnd}"/>
            <IconTabFilter key="FilteredOr" text="{i18n>tabHeaderFilterOr}"/>
          </items>
        </IconTabHeader>
        <ToolbarSpacer />
        <Button text="{i18n>toggleGroup}" press="onGroupRegionText" />
      </Toolbar>
    </customHeader>
    <content>
      <Table
        id="table"
        backgroundDesign="Translucent"
        busy="{worklistView/isBusy}"
        items="{
          path: 'myJsonModel>/'
        }" >
        <dragDropConfig>
          <dnd:DragDropInfo
            sourceAggregation="items"
            targetAggregation="items"
            dropPosition="Between"
            drop="onDropSelectedItem" />
        </dragDropConfig>
        <columns>
          <Column>
            <Text text="{i18n>Order}" />
          </Column>
          <Column>
            <Text text="{i18n>DocumentNumber}" />
          </Column>
          <Column>
            <Text text="{i18n>DocumentDate}" />
          </Column>
          <Column>
            <Text text="{i18n>PlantText}" />
          </Column>
          <Column>
            <Text text="{i18n>RegionText}" />
          </Column>
          <Column>
            <Text text="{i18n>Description}" />
          </Column>
          <Column>
            <Text text="{i18n>DescriptionChange}" />
          </Column>
          <Column>
            <Text text="{i18n>Created}" />
          </Column>
          <Column width="7%">
            <Text text="{i18n>AvatarInfo}" />
          </Column>
        </columns>

        <items>
          <ColumnListItem highlight="{= ${myJsonModel>DocumentNumber} ? ${myJsonModel>DocumentNumber}.indexOf('DocumentNumber') !== -1 ? 'Success' : 'Error' : 'Error' }">
            <cells>
              <Text text="{myJsonModel>order}" />
              <Text text="{myJsonModel>DocumentNumber}" />
              <Text text="{
                path: 'myJsonModel>DocumentDate',
                formatter: '.formatter.formatDate'}"
              />
              <Text text="{myJsonModel>PlantText}" />
              <Text text="{myJsonModel>RegionText}" />
              <Text text="{myJsonModel>Description}" />
              <Input
                value="{myJsonModel>Description}"
                change="onChangeDescription" />
              <Text text="{
                path: 'myJsonModel>Created',
                formatter: '.formatter.formatDate'}"
              />
              <Button
                icon="{i18n>iNavToAvatar}"
                press="onPressNavToAvatarInfo"
              />
            </cells>
          </ColumnListItem>
        </items>
      </Table>
    </content>
  </Page>

</mvc:View>